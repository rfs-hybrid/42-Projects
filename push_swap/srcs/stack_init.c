/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   stack_init.c                                       :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: maaugust <maaugust@student.42porto.com>    +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2025/05/29 16:38:45 by maaugust          #+#    #+#             */
/*   Updated: 2025/06/18 16:53:52 by maaugust         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "push_swap.h"

static void	stack_prev_node_init(t_stack **stack)
{
	t_stack	*last;
	t_stack	*tmp;

	last = *stack;
	while (last->next)
		last = last->next;
	last->next = *stack;
	tmp = *stack;
	tmp->prev = last;
	tmp = tmp->next;
	while (tmp != *stack)
	{
		last = last->next;
		tmp->prev = last;
		tmp = tmp->next;
	}
}

void	ft_stack_init(t_stack **stack, int argc, char **argv)
{
	// char *str = "742 -904 139 -503 904 -902 -337 -562 996 701 -101 851 902 321 678 626 512 460 -133 273 -230 -663 -152 -545 -294 223 -787 560 -999 -281 848 521 88 -950 343 -3 525 -652 483 -5 -350 -479 435 -825 403 -648 -521 971 494 676 959 -873 -986 327 -966 -106 -536 -729 929 -345 -666 -367 473 616 -643 89 -360 744 155 700 121 399 -68 405 962 552 801 498 920 -121 948 -392 -916 452 357 -703 892 573 -309 349 849 -463 -207 374 -606 -525 -659 659 59 916";
	// char *str = "985 223 -872 -430 238 795 61 355 -347 -910 376 -199 -252 862 887 400 806 394 63 771 -757 680 -357 737 -669 -525 182 423 535 -698 0 -358 -936 -317 961 481 -836 -342 738 532 296 -383 493 -822 837 -793 22 -1 -959 404 116 -230 -825 97 175 -989 533 40 -778 -394 794 -250 -118 479 396 -549 -621 279 352 526 -636 265 -913 630 835 -629 845 786 154 -29 774 -950 831 599 1 563 -847 -543 -498 79 42 480 356 -52 -287 -539 843 280 484 -34 844 -870 257 565 758 696 -691 -684 93 921 -44 58 954 -605 -492 94 -461 -377 915 505 894 26 200 -606 -637 -28 -301 -779 -771 225 -489 372 -37 -633 -359 544 847 -541 -641 464 -314 869 -706 898 165 807 888 787 131 320 953 -246 21 35 977 -591 -962 209 -760 242 -794 276 -821 -421 -833 -895 -653 -900 -432 467 405 277 -212 974 -172 70 -464 -693 827 -975 -896 -681 -797 -415 287 660 137 566 -995 466 -245 -222 -534 918 185 267 152 996 -437 189 860 -399 726 -166 -548 -334 305 645 45 512 471 724 167 -500 -206 -808 492 658 842 585 -824 562 946 460 981 906 997 -732 -353 623 95 -4 -788 -262 -189 346 490 537 880 -819 755 893 719 838 508 -884 133 155 545 -674 -707 618 802 32 -944 -742 218 -163 389 -311 -542 -312 851 713 924 387 -938 -885 -827 14 259 -772 15 -878 -408 993 818 -90 -444 228 -289 500 74 454 -877 -401 456 -144 -364 447 -141 96 221 244 213 -951 -640 -103 -560 -988 861 -867 750 -672 -528 -355 318 829 781 -361 -823 263 -66 82 378 715 846 871 164 198 37 -35 863 -715 -115 -828 -472 -639 487 962 772 657 281 -116 -559 891 297 -482 -211 -859 983 273 193 -33 123 -333 -85 -933 88 -907 -259 -148 840 201 -102 855 -433 534 920 942 -683 -228 -967 -71 -585 29 -238 858 338 939 912 -972 -69 -272 793 250 -924 195 797 143 -619 -181 -750 183 239 -302 -446 -147 569 -8 64 -992 -558 129 766 262 -651 994 516 247 850 -781 -273 -704 -892 -473 197 -941 578 884 803 -656 -805 637 410 593 622 911 708 -375 -510 -538 -150 128 675 903 33 -607 111 810 406 -740 -448 289 370 -338 655 -198 605 -866 402 -68 712 783 -305 731 -177 -620 -588 -767 187 -810 -480 6 24 87 951 -919 327 733 -89 710 261 789 399 -567 649 -921 -200 -834 -178 81 290 -708 -717 -807 -811 -748 688 611 764 612 -931 591 -929 661 -906 808 -659 714 539 815 -306 -809 759 176 -564 420 -841 -917";

	if (argc == 2)
		*stack = ft_string_to_stack(argv[1]);
		// *stack = ft_string_to_stack(str);
	else
		*stack = ft_argv_to_stack(argv);
	if (!*stack)
		ft_print_error();
	stack_prev_node_init(stack);
	ft_stack_reset_indexes(stack);
}
